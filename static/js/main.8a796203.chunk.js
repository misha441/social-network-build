(this["webpackJsonpfirst-app"]=this["webpackJsonpfirst-app"]||[]).push([[0],{100:function(e,t,n){e.exports={formControl:"FormControls_formControl__113RY",error:"FormControls_error__3PXSm"}},103:function(e,t,n){"use strict";t.a=n.p+"static/media/user_icon.706d8e43.png"},11:function(e,t,n){e.exports={navbar:"Navbar_navbar__2sH5C",navbarNav:"Navbar_navbarNav__2T6a2",navContent:"Navbar_navContent__lFai7",navbarIcon:"Navbar_navbarIcon__3dfF8",active:"Navbar_active__1ABZS"}},12:function(e,t,n){e.exports={usersSearcherWrapper:"users_usersSearcherWrapper__2Q3Gn",inputSearch:"users_inputSearch__55_MC",usersSearchButton:"users_usersSearchButton__3FrS5",searchIcon:"users_searchIcon__3ht8T",usersPhoto__wrapper:"users_usersPhoto__wrapper__1mrCV",usersPhoto:"users_usersPhoto__XcQZu",usersWrapper:"users_usersWrapper__1LwDB",userBlocksWrapper:"users_userBlocksWrapper__39cy_",userBlocks:"users_userBlocks__3jEzU",userBlock:"users_userBlock__3qewT",followBtnWrapper:"users_followBtnWrapper__3o8Zk",followBtn:"users_followBtn__1-rZe",userBlock__info:"users_userBlock__info__3Witl",userBlock__status:"users_userBlock__status__3oY4O",userBlock__fullName:"users_userBlock__fullName__AUoTB",userBlock__toDialogButton:"users_userBlock__toDialogButton__25RqB",usersMessageIcon:"users_usersMessageIcon__2TxfG",nothingFoundText:"users_nothingFoundText__3PEON"}},135:function(e,t,n){"use strict";n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return m})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return N}));var r=n(7),a=n.n(r),s=n(17),c=n(47),o=n(4),i=n(14),u=(n(80),"dialog/SEND-MESSAGE"),l="dialogs/SET_CURRENT_PAGE",d="SET_DIALOGS_LIST",p="SET_MESSAGES",j="SET_USER_ID",f="SET_USER_INFO",b="dialogs/TOGGLE_IS_FETCHING",h={selectedUserId:null,selectedUserPhoto:{small:null,large:null},selectedUserFullName:null,dialogs:[],messages:[],currentPage:1,pageSize:10,isFetching:!1},g=function(e){return{type:u,newMessageBody:e}},O=function(e){return{type:p,messages:e}},m=function(e){return{type:j,userId:e}},_=function(e){return{type:b,isFetching:e}},x=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.getAllDialogs();case 2:n=e.sent,t((r=n.data,{type:d,dialogs:r}));case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(_(!0)),n(w(e)),t.next=4,i.b.getMessages(e);case 4:r=t.sent,n(_(!1)),n(O(r.data.items)),n(m(e));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.c.getProfile(e);case 2:r=t.sent,n((a=r.data.photos,s=r.data.fullName,{type:f,photo:a,fullName:s}));case 4:case"end":return t.stop()}var a,s}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return n.next=3,i.b.sendMessage(e,t);case 3:n.sent,r(v(e)),r(x());case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var n=t.newMessageBody;return Object(o.a)(Object(o.a)({},e),{},{messages:[].concat(Object(c.a)(e.messages),[{id:5,message:n}])});case l:return Object(o.a)(Object(o.a)({},e),{},{currentPage:t.pageNumber});case d:return Object(o.a)(Object(o.a)({},e),{},{dialogs:t.dialogs});case p:return Object(o.a)(Object(o.a)({},e),{},{messages:t.messages});case j:return Object(o.a)(Object(o.a)({},e),{},{selectedUserId:t.userId});case f:return Object(o.a)(Object(o.a)({},e),{},{selectedUserPhoto:t.photo,selectedUserFullName:t.fullName});case b:return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetching});default:return e}}},14:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return u}));var r=n(142),a=r.create({withCredentials:!0,headers:{"API-KEY":"8e4e8245-e26f-4f04-aad8-74bedbfe3233"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),s={getUsers:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return a.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)).then((function(e){return e.data}))},getFriends:function(e,t){return a.get("users?page=".concat(e,"&count=").concat(t,"&friend=",!0)).then((function(e){return e.data}))},unfollow:function(e){return a.delete("follow/".concat(e))},follow:function(e){return a.post("follow/".concat(e))}},c={getProfile:function(e){return a.get("profile/"+e)},getStatus:function(e){return a.get("profile/status/"+e)},updateStatus:function(e){return a.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),a.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return a.put("profile",e)}},o={me:function(){return a.get("auth/me")},login:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return a.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},logout:function(){return a.delete("auth/login")}},i={getMessages:function(e){return a.get("dialogs/".concat(e,"/messages"))},sendMessage:function(e,t){return a.post("dialogs/".concat(e,"/messages"),{body:t})},getAllDialogs:function(){return a.get("dialogs")}},u={getCaptchaUrlApi:function(){return a.get("security/get-captcha-url")}}},141:function(e,t,n){e.exports={preloader:"preloader_preloader__39cDm"}},172:function(e,t,n){},176:function(e,t,n){},18:function(e,t,n){e.exports={loginFormWrapper:"Login_loginFormWrapper__2OFO9",loginTitle:"Login_loginTitle__20DNC",loginIcon:"Login_loginIcon__vTCzo",loginInputWrapper:"Login_loginInputWrapper__dU_bd",loginInputBlock:"Login_loginInputBlock__1oBaY",loginInput:"Login_loginInput__3v_Bm",formCheckbox:"Login_formCheckbox__2bz4_",formSummaryError:"Login_formSummaryError__De2Iu",loginButton:"Login_loginButton__3v_Pl"}},298:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),s=n.n(a),c=(n(172),function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,303)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))}),o=n(72),i=n.n(o),u=(n(176),n(11)),l=n.n(u),d=n(19),p=n(15),j=n(16),f=function(){return Object(r.jsx)("div",{className:l.a.navbar,children:Object(r.jsxs)("nav",{className:l.a.navbarNav,children:[Object(r.jsx)("li",{className:l.a.navContent,children:Object(r.jsxs)(d.b,{to:"/profile",activeClassName:l.a.active,children:[Object(r.jsx)(p.a,{className:l.a.navbarIcon,icon:j.n,fixedWidth:!0}),"Profile"]})}),Object(r.jsx)("li",{className:"".concat(l.a.navContent," ").concat(l.a.active),children:Object(r.jsxs)(d.b,{to:"/dialogs",activeClassName:l.a.active,children:[Object(r.jsx)(p.a,{className:l.a.navbarIcon,icon:j.e,fixedWidth:!0}),"Messages"]})}),Object(r.jsx)("li",{className:"".concat(l.a.navContent," ").concat(l.a.active),children:Object(r.jsxs)(d.b,{to:"/users",activeClassName:l.a.active,children:[Object(r.jsx)(p.a,{className:l.a.navbarIcon,icon:j.o,fixedWidth:!0}),"Users"]})}),Object(r.jsx)("li",{className:l.a.navContent,children:Object(r.jsxs)(d.b,{to:"/news",activeClassName:l.a.active,children:[Object(r.jsx)(p.a,{className:l.a.navbarIcon,icon:j.i,fixedWidth:!0}),"News"]})}),Object(r.jsx)("li",{className:l.a.navContent,children:Object(r.jsxs)(d.b,{to:"/music",activeClassName:l.a.active,children:[Object(r.jsx)(p.a,{className:l.a.navbarIcon,icon:j.h,fixedWidth:!0}),"Music"]})}),Object(r.jsx)("li",{className:l.a.navContent,children:Object(r.jsxs)(d.b,{to:"/settings",activeClassName:l.a.active,children:[Object(r.jsx)(p.a,{className:l.a.navbarIcon,icon:j.m,fixedWidth:!0}),"Settings"]})})]})})},b=n(60),h=n(61),g=n(63),O=n(62),m=n(23),_=n(12),x=n.n(_),v=n(104),w=n(30),N=n.n(w),S=s.a.memo((function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageUsersSize),n=[],s=1;s<=t;s++)n.push(s);var c=Math.ceil(t/e.pageSize),o=Object(a.useState)(1),i=Object(v.a)(o,2),u=i[0],l=i[1],d=e.pageSize*(u-1)+1,f=e.pageSize*u;return Object(r.jsxs)("div",{className:N.a.paginatorWrapper,children:[u>1&&Object(r.jsx)("button",{className:N.a.paginatorbuttonStyle,onClick:function(){l(u-1)},children:Object(r.jsx)(p.a,{className:N.a.paginatorIcon,icon:j.a,fixedWidth:!0})}),Object(r.jsx)("div",{className:N.a.pageNumbersBlock,children:n.filter((function(e){return e<=f&&e>=d})).map((function(t){return Object(r.jsx)("span",{className:"".concat(e.currentPage===t&&N.a.selectedPage," ").concat(N.a.pageNumbers),onClick:function(){e.onPageChanged(t)},children:t},t)}))}),c>u&&Object(r.jsx)("button",{className:N.a.paginatorbuttonStyle,onClick:function(){l(u+1)},children:Object(r.jsx)(p.a,{className:N.a.paginatorIcon,icon:j.b,fixedWidth:!0})})]})})),I=n(103),P=function(e){return Object(r.jsxs)("div",{className:x.a.userBlock,children:[Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:x.a.usersPhoto__wrapper,children:[Object(r.jsx)(d.b,{to:"/profile/"+e.user.id,children:Object(r.jsx)("img",{src:null!=e.user.photos.small?e.user.photos.small:I.a,className:x.a.usersPhoto,alt:""})}),Object(r.jsx)("div",{className:x.a.userBlock__toDialogButton,children:Object(r.jsx)(d.b,{to:"/dialogs/"+e.user.id,children:Object(r.jsx)(p.a,{className:x.a.usersMessageIcon,icon:j.c,fixedWidth:!0})})})]})}),Object(r.jsxs)("div",{className:x.a.userBlock__info,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(d.b,{className:x.a.userBlock__fullName,to:"/profile/"+e.user.id,children:Object(r.jsx)("div",{children:e.user.name})}),Object(r.jsx)("div",{className:x.a.userBlock__status,children:e.user.status})]}),Object(r.jsx)("div",{className:x.a.followBtnWrapper,children:Object(r.jsx)("div",{children:e.user.followed?Object(r.jsx)("button",{disabled:e.UsersInFollowingProgress.some((function(t){return t==e.user.id})),className:x.a.followBtn,onClick:function(){e.unfollow(e.user.id)},children:"Unfollow"}):Object(r.jsx)("button",{disabled:e.UsersInFollowingProgress.some((function(t){return t==e.user.id})),className:x.a.followBtn,onClick:function(){e.follow(e.user.id)},children:"Follow"})})})]})]},e.user.id)},C=n(136),k=n(137),y=n(39),U=Object(k.a)({form:"login"})((function(e){return Object(r.jsx)("form",{onSubmit:e.handleSubmit,children:Object(r.jsxs)("div",{className:x.a.usersSearcherWrapper,children:[Object(r.jsx)(C.a,{component:y.a,className:x.a.inputSearch,name:"term",placeholder:"user name",type:"text"}),Object(r.jsx)("div",{children:Object(r.jsxs)("button",{className:x.a.usersSearchButton,children:[Object(r.jsx)(p.a,{className:x.a.searchIcon,icon:j.k,fixedWidth:!0}),"Search"]})})]})})})),B=n(50),E=function(e){return console.log(e.users),Object(r.jsxs)("div",{className:x.a.usersWrapper,children:[Object(r.jsx)("div",{children:Object(r.jsx)(U,{onSubmit:function(t){e.requestUsers(1,e.pageSize,t.term)}})}),Object(r.jsx)("div",{children:Object(r.jsx)(S,{currentPage:e.currentPage,onPageChanged:e.onPageChanged,totalUsersCount:e.totalUsersCount,pageUsersSize:e.pageSize,pageSize:15})}),Object(r.jsxs)("div",{className:x.a.userBlocksWrapper,children:[e.isFetching?Object(r.jsx)(B.a,{}):null,e.users.length>0?Object(r.jsx)("div",{className:x.a.userBlocks,children:e.users.map((function(t){return Object(r.jsx)(P,{UsersInFollowingProgress:e.UsersInFollowingProgress,follow:e.follow,unfollow:e.unfollow,user:t,isFetching:e.isFetching},t.id)}))}):Object(r.jsx)("div",{className:x.a.nothingFoundText,children:"nothing found"})]})]})},F=n(7),T=n.n(F),L=n(17),W=n(47),A=n(4),z=n(14),M="users/FOLLOW",D="users/UNFOLLOW",R="users/SET_USERS",G="users/SET_CURRENT_PAGE",H="users/SET_TOTAL_USERS_COUNT",q="users/TOGGLE_IS_FETCHING",Y="users/TOGGLE_IS_FOLLOWING_PROGRESS",V="SET_TERM_VALUE",Z={users:[],pageSize:10,totalUsersCount:20,currentPage:1,isFetching:!1,UsersInFollowingProgress:[],term:""},X=function(e){return{type:M,userId:e}},J=function(e){return{type:D,userId:e}},Q=function(e){return{type:R,users:e}},K=function(e){return{type:G,pageNumber:e}},$=function(e){return{type:H,count:e}},ee=function(e){return{type:q,isFetching:e}},te=function(e,t){return{type:Y,isFetching:e,userId:t}},ne=function(e){return{type:V,term:e}},re=function(){var e=Object(L.a)(T.a.mark((function e(t,n,r,a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(te(!0,n)),e.next=3,r(n);case 3:0==e.sent.data.resultCode&&t(a(n)),t(te(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(A.a)(Object(A.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(A.a)(Object(A.a)({},e),{},{followed:!0}):e}))});case D:return Object(A.a)(Object(A.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(A.a)(Object(A.a)({},e),{},{followed:!1}):e}))});case R:return Object(A.a)(Object(A.a)({},e),{},{users:t.users});case G:return Object(A.a)(Object(A.a)({},e),{},{currentPage:t.pageNumber});case H:return Object(A.a)(Object(A.a)({},e),{},{totalUsersCount:t.count});case q:return Object(A.a)(Object(A.a)({},e),{},{isFetching:t.isFetching});case Y:return Object(A.a)(Object(A.a)({},e),{},{UsersInFollowingProgress:t.isFetching?[].concat(Object(W.a)(e.UsersInFollowingProgress),[t.userId]):e.UsersInFollowingProgress.filter((function(e){return e!=t.userId}))});case V:return Object(A.a)(Object(A.a)({},e),{},{term:t.term});default:return e}},se=n(10),ce=n(143),oe=Object(ce.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(){return!0}))})),ie=function(e){return e.usersPage.pageSize},ue=function(e){return e.usersPage.totalUsersCount},le=function(e){return e.usersPage.currentPage},de=function(e){return e.usersPage.isFetching},pe=function(e){return e.usersPage.UsersInFollowingProgress},je=function(e){return e.usersPage.term},fe=function(e){Object(g.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){var n=e.props.pageSize;e.props.requestUsers(t,n,e.props.term)},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){if(0===this.props.users.length){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.requestUsers(t,n)}}},{key:"render",value:function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(E,{currentPage:this.props.currentPage,totalUsersCount:this.props.totalUsersCount,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,pageSize:this.props.pageSize,onPageChanged:this.onPageChanged,toggleFollowingProgress:this.props.toggleFollowingProgress,UsersInFollowingProgress:this.props.UsersInFollowingProgress,requestUsers:this.props.requestUsers,isFetching:this.props.isFetching})})}}]),n}(s.a.Component),be=Object(se.d)(Object(m.b)((function(e){return{users:oe(e),pageSize:ie(e),totalUsersCount:ue(e),currentPage:le(e),isFetching:de(e),UsersInFollowingProgress:pe(e),term:je(e)}}),{follow:function(e){return function(){var t=Object(L.a)(T.a.mark((function t(n){var r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=z.e.follow,re(n,e,r,X);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(L.a)(T.a.mark((function t(n){var r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=z.e.unfollow,re(n,e,r,J);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setUsers:Q,toggleFollowingProgress:te,requestUsers:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(r){r(ee(!0)),r(K(e)),r(ne(n)),z.e.getUsers(e,t,n).then((function(e){r(ee(!1)),r(Q(e.items)),r($(e.totalCount))}))}},setTermValue:ne}))(fe),he=function(e){return Object(r.jsx)("div",{children:"News"})},ge=function(e){return Object(r.jsx)("div",{children:"Music"})},Oe=function(e){return Object(r.jsx)("div",{children:"Settings"})},me=n(13),_e=n(31),xe=n.n(_e),ve=n.p+"static/media/logo.73200dc5.png",we=n(79),Ne=n.n(we),Se=function(e){return Object(r.jsx)("header",{className:xe.a.header,children:Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("div",{className:xe.a.header__inner,children:[Object(r.jsx)("img",{className:xe.a.header_logo,src:ve,alt:""}),Object(r.jsx)("div",{className:xe.a.loginBlock,children:e.isAuth?Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{className:xe.a.loginBlock__name,children:e.login}),Object(r.jsxs)("button",{className:Ne()("buttonStyle",xe.a.headerButton),onClick:e.logout,children:[Object(r.jsx)(p.a,{className:xe.a.headerIcon,icon:j.l,fixedWidth:!0}),"Log out"]})]}):Object(r.jsx)(d.b,{className:xe.a.loginBlock__Login,to:"/login",children:"Login"})})]})})})},Ie=n(34),Pe="auth/SET_USER_DATA",Ce="auth/SET_USER_PHOTO",ke="auth/GET_CAPTCHA_URL_SUCCESS",ye={id:null,login:null,email:null,photos:{small:null,large:null},isAuth:!1,captchaUrl:null},Ue=function(e,t,n,r,a){return{type:Pe,data:{id:e,login:t,email:n,isAuth:r,captchaUrl:a}}},Be=function(e){return{type:ke,data:{captchaUrl:e}}},Ee=function(){return function(){var e=Object(L.a)(T.a.mark((function e(t){var n,r,a,s,c,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.me();case 2:if(0!==(n=e.sent).data.resultCode){e.next=10;break}return r=n.data.data,a=r.id,s=r.login,c=r.email,e.next=7,z.c.getProfile(a);case 7:o=e.sent,t(Ue(a,s,c,!0,null)),t((i=o.data.photos,{type:Ce,data:{photos:i}}));case 10:case"end":return e.stop()}var i}),e)})));return function(t){return e.apply(this,arguments)}}()},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:case ke:case Ce:return Object(A.a)(Object(A.a)({},e),t.data);default:return e}},Te=function(e){Object(g.a)(n,e);var t=Object(O.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(r.jsx)(Se,Object(A.a)({},this.props))}}]),n}(s.a.Component),Le=Object(m.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{getAuthUserData:Ee,logout:function(){return function(){var e=Object(L.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.logout();case 2:0===e.sent.data.resultCode&&t(Ue(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Te),We=n(54),Ae=n(18),ze=n.n(Ae),Me=Object(We.a)(40),De=Object(k.a)({form:"login"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsxs)("div",{className:ze.a.loginInputWrapper,children:["email :",Object(r.jsx)("div",{className:ze.a.loginInputBlock,children:Object(r.jsxs)("div",{children:[Object(r.jsx)(p.a,{className:ze.a.loginIcon,icon:j.n,fixedWidth:!0}),Object(r.jsx)(C.a,{component:y.a,className:ze.a.loginInput,type:"text",validate:[We.b,Me],name:"email",placeholder:"email"})]})})]}),Object(r.jsxs)("div",{className:ze.a.loginInputWrapper,children:["password :",Object(r.jsx)("div",{className:ze.a.loginInputBlock,children:Object(r.jsxs)("div",{children:[Object(r.jsx)(p.a,{className:ze.a.loginIcon,icon:j.g,fixedWidth:!0}),Object(r.jsx)(C.a,{component:y.a,className:ze.a.loginInput,validate:[We.b,Me],name:"password",placeholder:"password",type:"password"})]})})]}),Object(r.jsxs)("div",{className:ze.a.formCheckbox,children:[Object(r.jsx)(C.a,{component:y.a,name:"rememberMe",type:"checkbox"}),"remember me"]}),e.error&&Object(r.jsx)("div",{className:ze.a.formSummaryError,children:e.error}),Object(r.jsxs)("div",{children:[e.captchaUrl&&Object(r.jsx)("img",{src:e.captchaUrl,alt:""}),e.captchaUrl&&Object(r.jsx)("div",{className:ze.a.loginInputBlock,children:Object(r.jsxs)("div",{children:[Object(r.jsx)(p.a,{className:ze.a.loginIcon,icon:j.f,fixedWidth:!0}),Object(r.jsx)(C.a,{name:"captcha",className:ze.a.loginInput,component:y.a,placeholder:"Symbol from image",validate:[We.b]})]})})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("br",{}),Object(r.jsx)("button",{className:ze.a.loginButton,children:"Login"})]}),"mdm04dp12m"]})})),Re=Object(m.b)((function(e){return{captchaUrl:e.auth.captchaUrl,isAuth:e.auth.isAuth}}),{login:function(e,t,n,r){return function(){var a=Object(L.a)(T.a.mark((function a(s){var c,o;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z.a.login(e,t,n,r);case 2:0===(c=a.sent).data.resultCode?s(Ee()):(10===c.data.resultCode&&s(function(){var e=Object(L.a)(T.a.mark((function e(t){var n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.d.getCaptchaUrlApi();case 2:n=e.sent,console.log(n.data.url),r=n.data.url,t(Be(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o=c.data.messages.length>0?c.data.messages[0]:"Some error",s(Object(Ie.a)("login",{_error:o})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(r.jsx)(me.a,{to:"/profile"}):Object(r.jsx)("div",{className:ze.a.loginFormWrapper,children:Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:ze.a.loginTitle,children:"Login"}),Object(r.jsx)("div",{children:Object(r.jsx)(De,{captchaUrl:e.captchaUrl,onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)}})})]})})})),Ge="INITIALIZED_SUCCESS",He={initialized:!1},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return Object(A.a)(Object(A.a)({},e),{},{initialized:!0});default:return e}},Ye=n(80),Ve=n(135),Ze={},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;return e},Je=n(144),Qe=n(138),Ke=Object(se.c)({profilePage:Ye.b,dialogsPage:Ve.a,sidebar:Xe,usersPage:ae,auth:Fe,form:Qe.a,app:qe}),$e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||se.d,et=Object(se.e)(Ke,$e(Object(se.a)(Je.a)));window.store=et;var tt=et,nt=function(e){return function(t){return Object(r.jsx)(s.a.Suspense,{fallback:Object(r.jsx)("h1",{children:"Loading profile..."}),children:Object(r.jsx)(e,Object(A.a)({},t))})}},rt=s.a.lazy((function(){return n.e(4).then(n.bind(null,305))})),at=s.a.lazy((function(){return n.e(3).then(n.bind(null,304))})),st=Object(se.d)(me.g,Object(m.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(Ee());Promise.all([t]).then((function(){e({type:Ge})}))}}}))((function(e){return Object(a.useEffect)((function(){e.initializeApp()}),[]),e.initialized?Object(r.jsxs)("div",{className:"app-wrapper",children:[Object(r.jsx)(Le,{}),Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("div",{className:"mainContent",children:[Object(r.jsx)(f,{}),Object(r.jsx)("div",{className:"app-wrapper-content",children:Object(r.jsxs)(me.d,{children:[Object(r.jsx)(me.b,{exact:!0,path:"/",render:function(){return Object(r.jsx)(me.a,{to:"/profile"})}}),Object(r.jsx)(me.b,{path:"/dialogs/:userId?",render:nt(rt)}),Object(r.jsx)(me.b,{path:"/profile/:userId?",render:nt(at)}),Object(r.jsx)(me.b,{path:"/users",render:function(){return Object(r.jsx)(be,{})}}),Object(r.jsx)(me.b,{path:"/news",render:function(){return Object(r.jsx)(he,{})}}),Object(r.jsx)(me.b,{path:"/music",render:function(){return Object(r.jsx)(ge,{})}}),Object(r.jsx)(me.b,{path:"/settings",render:function(){return Object(r.jsx)(Oe,{})}}),Object(r.jsx)(me.b,{path:"/login",render:function(){return Object(r.jsx)(Re,{})}})]})})]})})]}):Object(r.jsx)(B.a,{})})),ct=function(e){return Object(r.jsx)(d.a,{children:Object(r.jsx)(m.a,{store:tt,children:Object(r.jsx)(st,{})})})};i.a.render(Object(r.jsx)(ct,{}),document.getElementById("root")),c()},30:function(e,t,n){e.exports={paginatorWrapper:"Paginator_paginatorWrapper__2Hcy0",paginatorbuttonStyle:"Paginator_paginatorbuttonStyle__2iELC",paginatorIcon:"Paginator_paginatorIcon__35O4m",pageNumbersBlock:"Paginator_pageNumbersBlock__2Yldn",pageNumbers:"Paginator_pageNumbers__2M3n7",selectedPage:"Paginator_selectedPage__3HOcY"}},31:function(e,t,n){e.exports={header:"Header_header__1fw8r",header__inner:"Header_header__inner__3pMH0",header_logo:"Header_header_logo__2T1fw",loginBlock:"Header_loginBlock__11k5z",loginBlock__Login:"Header_loginBlock__Login__1TvWC",loginBlock__name:"Header_loginBlock__name__38atc",headerButton:"Header_headerButton__34i61",headerIcon:"Header_headerIcon__1jzr1"}},39:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(4),a=n(0),s=n(78),c=(n(1),n(100)),o=n.n(c),i=function(e){e.input;var t=e.meta,n=e.children,r=(Object(s.a)(e,["input","meta","children"]),t.error&&t.touched);return Object(a.jsxs)("div",{className:o.a.formControl+" "+(r?o.a.error:""),children:[Object(a.jsx)("div",{children:n}),Object(a.jsx)("div",{children:r&&Object(a.jsx)("span",{children:t.error})})]})},u=function(e){var t=e.input,n=(e.meta,Object(s.a)(e,["input","meta"]));return Object(a.jsx)(i,Object(r.a)(Object(r.a)({},e),{},{children:Object(a.jsx)("textarea",Object(r.a)(Object(r.a)({},t),n))}))},l=function(e){var t=e.input,n=(e.meta,Object(s.a)(e,["input","meta"]));return Object(a.jsx)(i,Object(r.a)(Object(r.a)({},e),{},{children:Object(a.jsx)("input",Object(r.a)(Object(r.a)({},t),n))}))}},50:function(e,t,n){"use strict";var r=n(0),a=n.p+"static/media/preloader.7c0ad768.svg",s=n(141),c=n.n(s);t.a=function(e){return Object(r.jsx)("div",{className:c.a.preloader,children:Object(r.jsx)("img",{src:a,alt:""})})}},54:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){if(!e)return"Field is required"},a=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return _})),n.d(t,"g",(function(){return x})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return w}));var r=n(75),a=n(7),s=n.n(a),c=n(17),o=n(47),i=n(4),u=n(14),l=n(34),d="profile/ADD-POST",p="profile/SET_USER_PROFILE",j="profile/SET_STATUS",f="profile/DELETE_MESSAGE",b="profile/SAVE_PHOTO_SUCCESS",h={posts:[{id:1,message:"Hi, how are you?",likesCount:14},{id:2,message:"It's my life",likesCount:50},{id:3,message:"Ha-ha-ha",likesCount:21}],profile:null,status:""},g=function(e){return{type:d,newPostText:e}},O=function(e){return{type:j,status:e}},m=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.getProfile(e);case 2:r=t.sent,n((a=r.data,{type:p,profile:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.getStatus(e);case 2:r=t.sent,n(O(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.updateStatus(e);case 2:t.sent,n(O(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.savePhoto(e);case 2:0===(r=t.sent).data.resultCode&&n((a=r.data.data.photos,{type:b,photos:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n,a){var c,o,i,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().auth.id,t.next=3,u.c.saveProfile(e);case 3:if(0!==(o=t.sent).data.resultCode){t.next=8;break}n(m(c)),t.next=11;break;case 8:return(i=o.data.messages[0]).includes("Invalid url format")?(d=i.split(" ")[i.split(" ").length-1].split(")")[0].split(">")[1].toLowerCase(),n(Object(l.a)("edit-profile",{contacts:Object(r.a)({},d,"Invalid url format")}))):n(Object(l.a)("edit-profile",{_error:i})),t.abrupt("return",Promise.reject(i));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:var n={id:5,message:t.newPostText,likesCount:0};return Object(i.a)(Object(i.a)({},e),{},{newPostText:"",posts:[].concat(Object(o.a)(e.posts),[n])});case p:return Object(i.a)(Object(i.a)({},e),{},{profile:t.profile});case j:return Object(i.a)(Object(i.a)({},e),{},{status:t.status});case f:return Object(i.a)(Object(i.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!=t.postId}))});case b:return Object(i.a)(Object(i.a)({},e),{},{profile:Object(i.a)(Object(i.a)({},e.profile),{},{photos:t.photos})});default:return e}}}},[[298,1,2]]]);
//# sourceMappingURL=main.8a796203.chunk.js.map